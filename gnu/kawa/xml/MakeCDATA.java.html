
    <html>
    <head>
        <meta charset="UTF-8">
        <title>MakeCDATA.java</title>
        <style>
            body { font-family: monospace; white-space: pre; background-color: #f4f4f4; padding: 20px; }
        </style>
    </head>
    <body>
        <h2>MakeCDATA.java</h2>
        <pre>package gnu.kawa.xml;

import gnu.lists.Consumer;
import gnu.lists.XConsumer;
import gnu.mapping.CallContext;
import gnu.mapping.Location;
import gnu.mapping.MethodProc;
import gnu.xml.TextUtils;

public class MakeCDATA extends MethodProc {
    public static final MakeCDATA makeCDATA = new MakeCDATA();

    public void apply(CallContext ctx) {
        Consumer saved = ctx.consumer;
        XConsumer out = NodeConstructor.pushNodeContext(ctx);
        try {
            StringBuffer sbuf = new StringBuffer();
            String endMarker = Location.UNBOUND;
            while (true) {
                Object arg = ctx.getNextArg(endMarker);
                if (arg == endMarker) {
                    int n = sbuf.length();
                    char[] chars = new char[n];
                    sbuf.getChars(0, n, chars, 0);
                    out.writeCDATA(chars, 0, n);
                    return;
                }
                TextUtils.stringValue(arg, sbuf);
            }
        } finally {
            NodeConstructor.popNodeContext(saved, ctx);
        }
    }
}
</pre>
    </body>
    </html>
    